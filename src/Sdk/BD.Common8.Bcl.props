<Project>
	<!-- 当前项目 或 源码引用此项目 -->
	<PropertyGroup Condition="$(MSBuildProjectName) == $(MSBuildThisFileName) OR $(IsSourceReference) == 'true'">
		<AllowUnsafeBlocks>true</AllowUnsafeBlocks>
	</PropertyGroup>

	<!-- i18n 资源(当前项目 或 源码引用此项目) -->
	<Import Condition="$(MSBuildProjectName) == $(MSBuildThisFileName) OR $(IsSourceReference) == 'true'" Project="$(MSBuildThisFileDirectory)..\..\res\i18n\$(MSBuildThisFileName).props" />

	<PropertyGroup>
		<UseSourceGeneratorResx>true</UseSourceGeneratorResx>
		<IsGlobalUsingsCommon8Bcl>true</IsGlobalUsingsCommon8Bcl>
	</PropertyGroup>

	<ItemGroup>
		<PackageReference Include="Nito.Comparers" />
		<PackageReference Include="Crc32.NET" />
		<PackageReference Include="Newtonsoft.Json" />
		<PackageReference Include="Polly" />
	</ItemGroup>

	<!-- != .NET Framework 3.5 ~ 4.6 && != .NET Standard 1.X -->
	<ItemGroup Condition=" (!$(TargetFramework.StartsWith('net35')) AND !$(TargetFramework.StartsWith('net40')) AND !$(TargetFramework.StartsWith('net45')) AND !$(TargetFramework.StartsWith('net451')) AND !$(TargetFramework.StartsWith('net452')) AND !$(TargetFramework.EndsWith('net46')) AND !$(TargetFramework.StartsWith('netstandard1'))) OR $(TargetFramework.StartsWith('net462')) ">
		<PackageReference Include="Microsoft.Extensions.DependencyInjection" />
		<PackageReference Include="Microsoft.Extensions.Logging" />
		<PackageReference Include="System.IO.Pipelines" />
		<PackageReference Include="CommunityToolkit.HighPerformance" />
	</ItemGroup>

	<!-- != .NET Framework && != .NET Standard && >= .NET 7 -->
	<ItemGroup Condition=" !$(TargetFramework.StartsWith('net3')) AND !$(TargetFramework.StartsWith('net4')) AND !$(TargetFramework.StartsWith('netstandard')) AND !$(TargetFramework.StartsWith('net5')) AND !$(TargetFramework.StartsWith('net6')) ">
		<PackageReference Include="gfoidl.Base64" />
	</ItemGroup>

	<!-- != .NET Framework || .NET Standard 2.1+ -->
	<ItemGroup Condition=" !$(TargetFramework.StartsWith('net3')) AND !$(TargetFramework.StartsWith('net4')) AND !$(TargetFramework.StartsWith('netstandard1')) AND !$(TargetFramework.StartsWith('netstandard2.0')) ">
		<PackageReference Include="MemoryPack" />
	</ItemGroup>

	<!-- .NET Framework 4.6.1+ || .NET Standard 2.0+ -->
	<ItemGroup Condition=" !$(TargetFramework.EndsWith('net46')) AND !$(TargetFramework.EndsWith('net45')) AND !$(TargetFramework.EndsWith('net40')) AND !$(TargetFramework.EndsWith('net35')) AND !$(TargetFramework.EndsWith('netstandard1')) ">
		<PackageReference Include="MessagePack" />
		<PackageReference Include="System.Text.Json" />
	</ItemGroup>

	<!-- 源码引用此项目 -->
	<ItemGroup Condition="$(MSBuildProjectName) != $(MSBuildThisFileName) AND $(IsSourceReference) == 'true'">
		<Compile Include="$(MSBuildThisFileDirectory)..\$(MSBuildThisFileName)\**\*.cs">
			<LinkBase>_SourceReference\$(MSBuildThisFileName)</LinkBase>
		</Compile>
		<Compile Remove="$(MSBuildThisFileDirectory)..\$(MSBuildThisFileName)\bin\**" />
		<Compile Remove="$(MSBuildThisFileDirectory)..\$(MSBuildThisFileName)\obj\**" />
	</ItemGroup>

	<!-- 项目引用此项目 -->
	<ItemGroup Condition="$(MSBuildProjectName) != $(MSBuildThisFileName) AND $(IsSourceReference) != 'true'">
		<ProjectReference Include="$(MSBuildThisFileDirectory)..\$(MSBuildThisFileName)\$(MSBuildThisFileName).csproj" />
	</ItemGroup>
</Project>